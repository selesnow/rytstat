<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provide function for get data from YouTube Data API 
    &lt;https://developers.google.com/youtube/v3/docs/&gt;, YouTube Analytics API 
    &lt;https://developers.google.com/youtube/analytics/reference/&gt; and 
    YouTube Reporting API &lt;https://developers.google.com/youtube/reporting/v1/reports&gt;.">
<title>Work with YouTube API • rytstat</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Work with YouTube API">
<meta property="og:description" content="Provide function for get data from YouTube Data API 
    &lt;https://developers.google.com/youtube/v3/docs/&gt;, YouTube Analytics API 
    &lt;https://developers.google.com/youtube/analytics/reference/&gt; and 
    YouTube Reporting API &lt;https://developers.google.com/youtube/reporting/v1/reports&gt;.">
<meta property="og:image" content="/reference/figures/logo.png">
<meta property="og:image:alt" content="Loading data from YouTube API">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114798296-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114798296-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rytstat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/selesnow/rytstat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="rytstat---r-interface-for-work-with-youtube-apis-">rytstat - R interface for work with YouTube APIs 
<a class="anchor" aria-label="anchor" href="#rytstat---r-interface-for-work-with-youtube-apis-"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>rytstat</code> package is an R interface for working with the following YouTube APIs:</p>
<ul>
<li><a href="https://developers.google.com/youtube/reporting/v1/reports" class="external-link">YouTube Reporting API</a></li>
<li><a href="https://developers.google.com/youtube/analytics/data_model" class="external-link">YouTube Analytics API</a></li>
<li><a href="https://developers.google.com/youtube/v3/getting-started" class="external-link">YouTube Data API</a></li>
</ul>
<p>That is, the <code>rytstat</code> allows you to request any data available in the YouTube Creator Studio for further analysis and visualization using the R language.</p>
<div class="section level2">
<h2 id="privacy-policy">Privacy Policy<a class="anchor" aria-label="anchor" href="#privacy-policy"></a>
</h2>
<p>The <code>rytstat</code> package for authorization uses the <a href="https://gargle.r-lib.org/" class="external-link">gargle</a> package, the credentials obtained during authorization are stored exclusively on your local PC, you can find out the folder into which the credentials are cached using the <code><a href="reference/ryt_auth_configure.html">ryt_auth_cache_path()</a></code> function.</p>
<p>For loading data from your YouTube channel <code>rytstat</code> needs next scopes:</p>
<ul>
<li>View monetary and non-monetary YouTube Analytics reports for your YouTube content</li>
<li>View your YouTube account</li>
<li>View and manage your assets and associated content on YouTube</li>
<li>View YouTube Analytics reports for your YouTube content</li>
<li>Manage your YouTube account</li>
</ul>
<p>For more details see <a href="https://developers.google.com/youtube/reporting/guides/authorization#identify-access-scopes" class="external-link">Official YouTube API documentation</a>.</p>
<p>The package does not transfer your credentials or data obtained from your advertising accounts to third parties, however, the responsibility for information leakage remains on the side of the package user. The author does not bear any responsibility for their safety, be careful when transferring cached credentials to third parties.</p>
<p>For more details, I recommend that you read the following articles from the official documentation of the gargle package:</p>
<ul>
<li><a href="https://www.tidyverse.org/blog/2021/07/gargle-1-2-0/" class="external-link">Stewarding the cache of user tokens</a></li>
<li><a href="https://cran.r-project.org/package=gargle/vignettes/auth-from-web.html" class="external-link">Auth when using R in the browser</a></li>
<li><a href="https://cran.r-project.org/package=gargle/vignettes/how-gargle-gets-tokens.html" class="external-link">How gargle gets tokens</a></li>
</ul>
<div class="section level3">
<h3 id="authorization-process">Authorization process<a class="anchor" aria-label="anchor" href="#authorization-process"></a>
</h3>
<p>You run <code>gads_auth('me@gmail.com')</code> and start <a href="https://medium.com/typeforms-engineering-blog/the-beginners-guide-to-oauth-dancing-4b8f3666de10" class="external-link">OAuth Dance</a> in the browser:</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/selesnow/rytstat/master/man/figures/auth_process.png" alt=""><p class="caption">Typical OAuth dance in the browser, when initiated from within R</p>
</div>
<p>Upon success, you see this message in the browser:</p>
<p><code>Authentication complete. Please close this page and return to R.</code></p>
<p>And you credentials cached locally on your PC in the form of RDS files.</p>
</div>
<div class="section level3">
<h3 id="key-points">Key points<a class="anchor" aria-label="anchor" href="#key-points"></a>
</h3>
<ul>
<li>By default, gargle caches user tokens centrally, at the user level, and their keys or labels also convey which Google identity is associated with each token.</li>
<li>Token storage relies on serialized R objects. That is, tokens are stored locally on your PC in the form of RDS files.</li>
</ul>
</div>
<div class="section level3">
<h3 id="use-own-oauth-client">Use own OAuth client<a class="anchor" aria-label="anchor" href="#use-own-oauth-client"></a>
</h3>
<p>You can use own OAuth app:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/oauth_app.html" class="external-link">oauth_app</a></span><span class="op">(</span>appname <span class="op">=</span> <span class="st">"app name"</span>, key <span class="op">=</span> <span class="st">"app id"</span>, secret <span class="op">=</span> <span class="st">"app secret"</span><span class="op">)</span>
<span class="fu"><a href="reference/ryt_auth_configure.html">ryt_auth_configure</a></span><span class="op">(</span>app <span class="op">=</span> <span class="va">app</span><span class="op">)</span>

<span class="co"># or from json file </span>
<span class="fu"><a href="reference/ryt_auth_configure.html">ryt_auth_configure</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">'D:/ga_auth/app.json'</span><span class="op">)</span>

<span class="co"># run authorization</span>
<span class="fu"><a href="reference/ryt_auth.html">ryt_auth</a></span><span class="op">(</span><span class="st">'me@gmail.com'</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
<p>You can instal <code>rytstat</code> from <a href="https://cran.r-project.org/package=rytstat" class="external-link">CRAN</a> or <a href="https://github.com/selesnpw/rytstat" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rytstat"</span><span class="op">)</span></code></pre></div>
<p>или GitHub:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'selesnow/rytstat'</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="auth">Auth<a class="anchor" aria-label="anchor" href="#auth"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://selesnow.github.io/rytstat/docs/" class="external-link">rytstat</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://httr.r-lib.org/" class="external-link">httr</a></span><span class="op">)</span>

<span class="co"># auth app</span>
<span class="va">app</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr.r-lib.org/reference/oauth_app.html" class="external-link">oauth_app</a></span><span class="op">(</span>
    appname <span class="op">=</span> <span class="st">'my app'</span>,
    key <span class="op">=</span> <span class="st">'app id'</span>, 
    secret <span class="op">=</span> <span class="st">'app secret'</span><span class="op">)</span>

<span class="fu"><a href="reference/ryt_auth_configure.html">ryt_auth_configure</a></span><span class="op">(</span>app <span class="op">=</span> <span class="va">app</span><span class="op">)</span>

<span class="fu"><a href="reference/ryt_auth.html">ryt_auth</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">'me@gmail.com'</span><span class="op">)</span>

<span class="co"># load videos</span>
<span class="va">videos</span> <span class="op">&lt;-</span> <span class="fu">ryt_get_video_list</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-youtube-analytics-api">Using YouTube Analytics API<a class="anchor" aria-label="anchor" href="#using-youtube-analytics-api"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://selesnow.github.io/rytstat/docs/" class="external-link">rytstat</a></span><span class="op">)</span>

<span class="co"># get list of videos</span>
<span class="va">videos</span> <span class="op">&lt;-</span> <span class="fu">ryt_get_video_list</span><span class="op">(</span><span class="op">)</span>

<span class="co"># get statistics by day and videos</span>
<span class="co"># you can specify no more than 500 videos at a time</span>
<span class="va">video_stat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ryt_get_analytics.html">ryt_get_analytics</a></span><span class="op">(</span>
  start_date <span class="op">=</span> <span class="st">'2021-01-01'</span>, 
  end_date <span class="op">=</span> <span class="st">'2021-09-01'</span>,
  dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'day'</span>, <span class="st">'video'</span><span class="op">)</span>,
  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'views'</span>, 
              <span class="st">'likes'</span>, 
              <span class="st">'dislikes'</span>, 
              <span class="st">'comments'</span>, 
              <span class="st">'shares'</span><span class="op">)</span>,
  filters <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">'video=={str_c(head(videos$id_video_id, 500), collapse=",")}'</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-youtube-reporting-api">Using YouTube Reporting API<a class="anchor" aria-label="anchor" href="#using-youtube-reporting-api"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># auth</span>
<span class="fu"><a href="reference/ryt_auth.html">ryt_auth</a></span><span class="op">(</span><span class="st">'me@gmail.com'</span><span class="op">)</span>

<span class="co"># get reporting data</span>
<span class="co">## create job</span>
<span class="fu">ryt_reports_create_job</span><span class="op">(</span><span class="st">'channel_basic_a2'</span><span class="op">)</span>

<span class="co">## get job list</span>
<span class="va">jobs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reporting_api.html">ryt_get_job_list</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">## get job report list</span>
<span class="va">reports</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reporting_api.html">ryt_get_report_list</a></span><span class="op">(</span>
  job_id <span class="op">=</span> <span class="va">jobs</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
  created_after <span class="op">=</span> <span class="st">'2021-10-20T15:01:23.045678Z'</span>
<span class="op">)</span>

<span class="co"># get report data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reporting_api.html">ryt_get_report</a></span><span class="op">(</span>
  download_url <span class="op">=</span> <span class="va">reports</span><span class="op">$</span><span class="va">downloadUrl</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="op">)</span>

<span class="co"># delete job</span>
<span class="fu"><a href="reference/reporting_api.html">ryt_delete_job</a></span><span class="op">(</span><span class="va">jobs</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a>
</h2>
<p>Alexey Seleznev, Head of analytics dept. at <a href="https://netpeak.net" class="external-link">Netpeak</a> <br>Telegram Channel: <a href="http://t.me/R4marketing" class="external-link">R4marketing</a> <br>YouTube Channel: <a href="https://www.youtube.com/R4marketing/?sub_confirmation=1" class="external-link">R4marketing</a> <br>email: <a href="mailto:selesnow@gmail.com" class="email">selesnow@gmail.com</a> <br>facebook: <a href="https://www.facebook.com/selesnow" class="external-link">facebook.com/selesnow</a> <br>blog: <a href="https://alexeyseleznev.wordpress.com/" class="external-link">alexeyseleznev.wordpress.com</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rytstat" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/selesnow/rytstat/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/selesnow/rytstat/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rytstat</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Alexey Seleznev <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0410-7385" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=rytstat" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/rytstat"></a></li>
<li><a href="https://cran.r-project.org/package=rytstat" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/rytstat?color=lightgrey"></a></li>
<li><a href="https://cran.r-project.org/package=rytstat" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/last-week/rytstat?color=lightgrey"></a></li>
<li><a href="https://CRAN.R-project.org/package=rytstat" class="external-link"><img src="https://www.r-pkg.org/badges/version/rytstat" alt="CRAN status"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/selesnow/rytstat/actions" class="external-link"><img src="https://github.com/selesnow/rytstat/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alexey Seleznev.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
